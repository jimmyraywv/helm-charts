apiVersion: apps/v1  
kind: Deployment  
metadata:  
  name: {{ .Values.deployment.name }} 
  namespace: {{ .Values.deployment.namespace }}
  labels: {{ .Values.deployment.labels }}
spec: 
  revisionHistoryLimit: {{ .Values.deployment.revisionHistoryLimit }}
  selector:  
    matchLabels: {{ .Values.deployment.matchLabels }}
  replicas: {{ .Values.deployment.replicaCount }}
  strategy:  
    type: RollingUpdate  
    rollingUpdate:  
      maxSurge: 5  
      maxUnavailable: 1 
  template:  
    metadata:  
      labels: {{ .Values.deployment.podTemplateLabels }}
    spec:  
      securityContext: {{ .Values.deployment.podSecurityContext }}
      containers:  
      - name: {{ .Values.deployment.containerName }} 
        image: {{ .Values.deployment.image.repository }}:{{ .Values.deployment.image.tag }}
        imagePullPolicy: IfNotPresent
        securityContext: {{ .Values.deployment.securityContext }}
        resources: {{ .Values.deployment.resource }} 
        readinessProbe: {{ .Values.readinessProbe }} 
        livenessProbe: {{ .Values.deployment.livenessProbe }}
        ports: {{ .Values.deployment.ports }}
        volumeMounts:
          - mountPath: /tmp
            name: tmp
      volumes:
      - name: tmp
        emptyDir: {}